<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      * {
        font-family: sans-serif;
      }
      body {
        font-size: 14px;
      }
      h3,
      p,
      ul {
        margin: 0;
      }
      section {
        margin: 20px 0;
        padding: 5px;
        box-shadow: 0 0 9px #d48dd4;
        border-radius: 3px;
      }
      section > div {
        margin: 5px 0;
      }
      .query {
        background-color: #dbdccf;
        padding: 7px 5px;
      }
      .query pre {
        margin: 0;
      }
      table {
        border-collapse: collapse;
      }
      th,
      td {
        border: 1px solid #723457;
        padding: 2px;
      }
      sup {
        color: #454545;
      }
      th[colspan] {
        color: #723457;
      }
      .source-table {
        display: flex;
      }
      .source-table table {
        margin-right: 7px;
      }
    </style>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Postgresql</title>
  </head>
  <body>
    <section>
      <div class="title">
        <h3>Create new table</h3>
      </div>
      <div class="info">
        <ul>
          <li>
            This query will create new table called people in our database.
          </li>
        </ul>
      </div>
      <div class="query">
        <pre>
<b>CREATE TABLE</b> people (
  id <b>SERIAL PRIMARY KEY</b>,
  name <b>VARCHAR</b>(20),
  city <b>VARCHAR</b>(20),
  monthly_income <b>DECIMAL</b>,
  travel_spendings <b>DECIMAL</b>
);</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>id<sup>PK</sup></th>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Create new table</h3>
      </div>
      <div class="info">
        <ul>
          <li>This query will create new table using foreign key.</li>
        </ul>
      </div>
      <div class="query">
        <pre>
<b>CREATE TABLE</b> pets (
  id <b>SERIAL PRIMARY KEY</b>,
  pet <b>VARCHAR</b>(20),
  person_id <b>INTEGER REFERENCES</b> people(id)
);</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>id<sup>PK</sup></th>
              <th>pet</th>
              <th>person_id<sup>FK</sup></th>
            </tr>
          </thead>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Insert data into a table</h3>
      </div>
      <div class="info">
        <ul>
          <li>Note that values are in single quotes.</li>
          <li>Provided values order should match the expected values.</li>
          <li>Here we assume, that Primary key was set.</li>
        </ul>
      </div>
      <div class="query">
        <pre>
<b>INSERT INTO</b> people(name, city, monthly_income, travel_spendings)
<b>VALUES</b> ('Mira', 'Sofia', 5800, 2200.50), ('Iva', 'Plovdiv', 7200, 1900);
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>id<sup>PK</sup></th>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200.50</td>
            </tr>
            <tr>
              <td>2</td>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Read data</h3>
      </div>
      <div class="info">
        <ul>
          <li>This way we will read all the table's data.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200.50</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>SELECT</b> * <b>FROM</b> people;
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200.50</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Read partial data</h3>
      </div>
      <div class="info">
        <ul>
          <li>This way we will read only specific columns.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200.50</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>SELECT</b> name, city <b>FROM</b> people;
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Read and transform data</h3>
      </div>
      <div class="info">
        <ul>
          <li>We can use math operators with different columns values.</li>
          <li>With AS we can get meaningful column names.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>SELECT</b> name, monthly_income - travel_spendings <b>AS</b> net, travel_spendings / monthly_income * 100 <b>AS</b> perc
<b>FROM</b> people;
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>net</th>
              <th>perc</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>3599.50</td>
              <td>37.93965517241379310300</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>5300</td>
              <td>26.38888888888888888900</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Use functions</h3>
      </div>
      <div class="info">
        <ul>
          <li>We can use functions to transform the output.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>SELECT CONCAT</b> (name, ' lives in ', UPPER(city), '.') <b>AS</b> sentence
<b>FROM</b> people;
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>sentence</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira lives in SOFIA.</td>
            </tr>
            <tr>
              <td>Iva lives in PLOVDIV.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Filter results</h3>
      </div>
      <div class="info">
        <ul>
          <li>This is how we can filter results.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>SELECT</b> name, city <b>FROM</b> people
<b>WHERE</b> monthly_income >= 7000 <b>AND</b> city = 'Plovdiv';
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Between value or in array of values</h3>
      </div>
      <div class="info">
        <ul>
          <li>This is how we can filter results.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>SELECT</b> name, city <b>FROM</b> people
<b>WHERE</b> monthly_income <b>BETWEEN</b> 5000 <b>AND</b> 7000 <b>AND</b> city <b>IN</b> ('Sofia', 'Varna');
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Update value</h3>
      </div>
      <div class="info">
        <ul>
          <li>We can update all values or some, based on condition.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>UPDATE</b> people <b>SET</b> monthly_income = 6900 <b>WHERE</b> name = 'Mira' <b>OR</b> city = 'Sofia';
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>6900</td>
              <td>2200</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Delete row/rows</h3>
      </div>
      <div class="info">
        <ul>
          <li>We can delete all rows or some, based on condition.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mira</td>
              <td>Sofia</td>
              <td>5800</td>
              <td>2200</td>
            </tr>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>DELETE FROM</b> people <b>WHERE</b> name = 'Mira';
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>city</th>
              <th>monthly_income</th>
              <th>travel_spendings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Iva</td>
              <td>Plovdiv</td>
              <td>7200</td>
              <td>1900</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <div class="title">
        <h3>Joining tables</h3>
      </div>
      <div class="info">
        <ul>
          <li>Inner join will return result which are match in both tables.</li>
        </ul>
      </div>
      <div class="source-table">
        <table>
          <thead>
            <tr>
              <th colspan="2">users</th>
            </tr>
            <tr>
              <th>id<sup>PK</sup></th>
              <th>name</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>Mira</td>
            </tr>
            <tr>
              <td>2</td>
              <td>Sofia</td>
            </tr>
            <tr>
              <td>3</td>
              <td>Ivan</td>
            </tr>
            <tr>
              <td>4</td>
              <td>Metodi</td>
            </tr>
            <tr>
              <td>5</td>
              <td>Marina</td>
            </tr>
          </tbody>
        </table>
        <table>
          <thead>
            <tr>
              <th colspan="3">images</th>
            </tr>
            <tr>
              <th>id<sup>PK</sup></th>
              <th>url</th>
              <th>user_id<sup>FK</sup></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>image-1.png</td>
              <td>1</td>
            </tr>
            <tr>
              <td>2</td>
              <td>image-2.png</td>
              <td>1</td>
            </tr>
            <tr>
              <td>3</td>
              <td>image-3.png</td>
              <td>2</td>
            </tr>
            <tr>
              <td>4</td>
              <td>image-4.png</td>
              <td>2</td>
            </tr>
            <tr>
              <td>5</td>
              <td>image-3.png</td>
              <td>1</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="query">
        <pre>
<b>SELECT</b> u.id <b>AS</b> uid, name, i.id <b>AS</b> iid, url, user_id
<b>FROM</b> users <b>AS</b> u <b>INNER JOIN</b> images <b>AS</b> i <b>ON</b> u.id = i.user_id;
</pre>
      </div>
      <div class="result-table">
        <table>
          <thead>
            <tr>
              <th>uid</th>
              <th>name</th>
              <th>iid</th>
              <th>url</th>
              <th>user_id</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>Mira</td>
              <td>1</td>
              <td>image-1.png</td>
              <td>1</td>
            </tr>
            <tr>
              <td>1</td>
              <td>Mira</td>
              <td>2</td>
              <td>image-2.png</td>
              <td>1</td>
            </tr>
            <tr>
              <td>2</td>
              <td>Sofia</td>
              <td>3</td>
              <td>image-3.png</td>
              <td>2</td>
            </tr>
            <tr>
              <td>2</td>
              <td>Sofia</td>
              <td>4</td>
              <td>image-4.png</td>
              <td>2</td>
            </tr>
            <tr>
              <td>3</td>
              <td>Ivan</td>
              <td>5</td>
              <td>image-5.png</td>
              <td>3</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </body>
</html>
